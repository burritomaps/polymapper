if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(j){function T(d){var e=d.indexOf(":");return e<0?d:{space:j.ns[d.substring(0,e)],local:d.substring(e+1)}}function q(){for(var d=0;d<q.maps.length;d++)q.maps[d].resize()}function G(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function E(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function P(d,e){if(d.row>e.row)var a=d,d=e,e=a;return{x0:d.column,y0:d.row,x1:e.column,y1:e.row,dx:e.column-d.column,dy:e.row-d.row}}function R(d,e,a,h,f){a=Math.max(a,Math.floor(e.y0));
h=Math.min(h,Math.ceil(e.y1));if(d.x0==e.x0&&d.y0==e.y0?d.x0+e.dy/d.dy*d.dx<e.x1:d.x1-e.dy/d.dy*d.dx<e.x0)var c=d,d=e,e=c;for(var c=d.dx/d.dy,g=e.dx/e.dy,m=d.dx>0,j=e.dx<0;a<h;a++)f(Math.floor(g*Math.max(0,Math.min(e.dy,a+j-e.y0))+e.x0),Math.ceil(c*Math.max(0,Math.min(d.dy,a+m-d.y0))+d.x0),a)}function S(d,e,a,h,f,c){var g=P(d,e),e=P(e,a),d=P(a,d);g.dy>e.dy&&(a=g,g=e,e=a);g.dy>d.dy&&(a=g,g=d,d=a);e.dy>d.dy&&(a=e,e=d,d=a);g.dy&&R(d,g,h,f,c);e.dy&&R(d,e,h,f,c)}j.version="2.5.1";var O={x:0,y:0};j.ns=
{svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};j.id=function(){var d=0;return function(){return++d}}();j.svg=function(d){return document.createElementNS(j.ns.svg,d)};j.transform=function(d,e,a,h,f,c){var g={},m,j,l;arguments.length||(d=1,e=f=a=0,h=1,c=0);g.zoomFraction=function(c){if(!arguments.length)return j;j=c;m=Math.floor(j+Math.log(Math.sqrt(d*d+e*e+a*a+h*h))/Math.LN2);l=Math.pow(2,-m);return g};g.apply=function(g){var i=Math.pow(2,-g.zoom),l=Math.pow(2,g.zoom-m);return{column:(d*
g.column*i+a*g.row*i+f)*l,row:(e*g.column*i+h*g.row*i+c)*l,zoom:g.zoom-m}};g.unapply=function(g){var i=Math.pow(2,-g.zoom),l=Math.pow(2,g.zoom+m);return{column:(g.column*i*h-g.row*i*a-f*h+c*a)/(d*h-e*a)*l,row:(g.column*i*e-g.row*i*d-f*e+c*d)/(a*e-h*d)*l,zoom:g.zoom+m}};g.toString=function(){return"matrix("+[d*l,e*l,a*l,h*l].join(" ")+" 0 0)"};return g.zoomFraction(0)};j.cache=function(d,e){function a(a){k--;e&&e(a);delete g[a.key];if(a.next)a.next.prev=a.prev;else if(j=a.prev)j.next=null;if(a.prev)a.prev.next=
a.next;else if(m=a.next)m.prev=null}function h(){for(var c=j;k>l;c=c.prev){if(!c)break;c.lock||a(c)}}var f={},c={},g={},m=null,j=null,l=64,k=0;f.peek=function(a){return g[[a.zoom,a.column,a.row].join("/")]};f.load=function(a,f){var e=[a.zoom,a.column,a.row].join("/"),h=g[e];if(h){if(h.prev)(h.prev.next=h.next)?h.next.prev=h.prev:j=h.prev,h.prev=null,h.next=m,m=m.prev=h;h.lock=1;return c[e]=h}h={key:e,column:a.column,row:a.row,zoom:a.zoom,next:m,prev:null,lock:1};d.call(null,h,f);c[e]=g[e]=h;m?m.prev=
h:j=h;m=h;k++;return h};f.unload=function(g){if(!(g in c))return!1;var f=c[g];f.lock=0;delete c[g];f.request&&f.request.abort(!1)&&a(f);return f};f.locks=function(){return c};f.size=function(a){if(!arguments.length)return l;l=a;h();return f};f.flush=function(){h();return f};f.clear=function(){for(var a in g){var d=g[a];d.request&&d.request.abort(!1);e&&e(g[a]);if(d.lock)d.lock=0,d.element.parentNode.removeChild(d.element)}c={};g={};m=j=null;k=0;return f};return f};j.url=function(d){function e(f){var c=
f.zoom<0?1:1<<f.zoom,g=f.column;if(h)g=f.column%c,g<0&&(g+=c);else if(g<0||g>=c)return null;return d.replace(/{(.)}/g,function(c,d){switch(d){case "S":return a[(Math.abs(f.zoom)+f.row+g)%a.length];case "Z":return f.zoom;case "X":return g;case "Y":return f.row;case "B":var e=j.map.coordinateLocation({row:f.row,column:g,zoom:f.zoom}),h=j.map.coordinateLocation({row:f.row+1,column:g+1,zoom:f.zoom}),i=Math.ceil(Math.log(f.zoom)/Math.LN2);return h.lat.toFixed(i)+","+e.lon.toFixed(i)+","+e.lat.toFixed(i)+
","+h.lon.toFixed(i);case "G":return e=j.map.coordinateLocation({row:f.row,column:g,zoom:f.zoom}),h=j.map.coordinateLocation({row:f.row+1,column:g+1,zoom:f.zoom}),i=Math.ceil(Math.log(f.zoom)/Math.LN2),e.lon.toFixed(i)+","+h.lat.toFixed(i)+","+h.lon.toFixed(i)+","+e.lat.toFixed(i)}return d})}var a=[],h=!0;e.template=function(a){if(!arguments.length)return d;d=a;return e};e.hosts=function(d){if(!arguments.length)return a;a=d;return e};e.repeat=function(a){if(!arguments.length)return h;h=a;return e};
return e};j.dispatch=function(d){var e={};d.on=function(a,h){for(var f=e[a]||(e[a]=[]),c=0;c<f.length;c++)if(f[c].handler==h)return d;f.push({handler:h,on:!0});return d};d.off=function(a,h){var f=e[a];if(f)for(var c=0;c<f.length;c++){var g=f[c];if(g.handler==h){g.on=!1;f.splice(c,1);break}}return d};return function(a){var h=e[a.type];if(h)for(var h=h.slice(),f=0;f<h.length;f++){var c=h[f];c.on&&c.handler.call(d,a)}}};j.queue=function(){function d(){!(f>=c)&&h.length&&(f++,h.pop()())}function e(a){for(var c=
0;c<h.length;c++)if(h[c]==a)return h.splice(c,1),!0;return!1}function a(a,c,j){function l(){k=new XMLHttpRequest;j&&k.overrideMimeType&&k.overrideMimeType(j);k.open("GET",a,!0);k.onreadystatechange=function(){k.readyState==4&&(f--,k.status<300&&c(k),d())};k.send(null)}var k;h.push(l);d();return{abort:function(a){return e(l)?!0:a&&k?(k.abort(),!0):!1}}}var h=[],f=0,c=6;return{text:function(c,d,f){return a(c,function(a){a.responseText&&d(a.responseText)},f)},xml:function(c,d){return a(c,function(a){a.responseXML&&
d(a.responseXML)},"application/xml")},json:function(c,d){return a(c,function(a){a.responseText&&d(JSON.parse(a.responseText))},"application/json")},image:function(a,c,r){function l(){k=document.createElement("img");k.onerror=function(){f--;d()};k.onload=function(){f--;r(k);d()};k.src=c;a.setAttributeNS(j.ns.xlink,"href",c)}var k;h.push(l);d();return{abort:function(a){return e(l)?!0:a&&k?(k.src="about:",!0):!1}}}}}();j.map=function(){function d(){n&&(l<n[0]?l=n[0]:l>n[1]&&(l=n[1]));k=l-(l=Math.round(l));
i=Math.pow(2,k)}function e(){if(B){var a=45/Math.pow(2,l+k-3),c=Math.max(Math.abs(s*g.x+x*g.y),Math.abs(H*g.x+u*g.y)),d=G(L-c*a/m.y),c=G(y+c*a/m.y);r.lat=Math.max(d,Math.min(c,r.lat));d=Math.max(Math.abs(s*g.y+x*g.x),Math.abs(H*g.y+u*g.x));r.lon=Math.max(B[0].lon-d*a/m.x,Math.min(B[1].lon+d*a/m.x,r.lon))}}var a={},h,f,c=O,g=O,m={x:256,y:256},r={lat:37.76487,lon:-122.41948},l=12,k=0,i=1,n=[1,18],w=0,x=1,s=0,u=1,H=0,L=-180,y=180,B=[{lat:G(L),lon:-Infinity},{lat:G(y),lon:Infinity}];a.locationCoordinate=
function(a){var a=j.map.locationCoordinate(a),c=Math.pow(2,l);a.column*=c;a.row*=c;a.zoom+=l;return a};a.coordinateLocation=j.map.coordinateLocation;a.coordinatePoint=function(a,c){var d=Math.pow(2,l-c.zoom),f=Math.pow(2,l-a.zoom),e=(c.column*d-a.column*f)*m.x*i,d=(c.row*d-a.row*f)*m.y*i;return{x:g.x+x*e-s*d,y:g.y+s*e+x*d}};a.pointCoordinate=function(a,c){var d=Math.pow(2,l-a.zoom),f=(c.x-g.x)/i,e=(c.y-g.y)/i;return{column:a.column*d+(u*f-H*e)/m.x,row:a.row*d+(H*f+u*e)/m.y,zoom:l}};a.locationPoint=
function(a){var c=Math.pow(2,l+k-3)/45,d=(a.lon-r.lon)*c*m.x,a=(E(r.lat)-E(a.lat))*c*m.y;return{x:g.x+x*d-s*a,y:g.y+s*d+x*a}};a.pointLocation=function(a){var c=45/Math.pow(2,l+k-3),d=(a.x-g.x)*c,a=(a.y-g.y)*c;return{lon:r.lon+(u*d-H*a)/m.x,lat:G(E(r.lat)-(H*d+u*a)/m.y)}};var J=j.svg("rect");J.setAttribute("visibility","hidden");J.setAttribute("pointer-events","all");a.container=function(c){if(!arguments.length)return h;h=c;h.setAttribute("class","map");h.appendChild(J);return a.resize()};a.focusableParent=
function(){for(var a=h;a;a=a.parentNode)if(a.tabIndex>=0)return a;return window};a.mouse=function(a){var c=(h.ownerSVGElement||h).createSVGPoint();if(Q<0&&(window.scrollX||window.scrollY)){var d=document.body.appendChild(j.svg("svg"));d.style.position="absolute";d.style.top=d.style.left="0px";var f=d.getScreenCTM();Q=!(f.f||f.e);document.body.removeChild(d)}Q?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY);return c.matrixTransform(h.getScreenCTM().inverse())};a.size=function(d){if(!arguments.length)return c;
f=d;return a.resize()};a.resize=function(){f?(c=f,q.remove(a)):(J.setAttribute("width","100%"),J.setAttribute("height","100%"),b=J.getBBox(),c={x:b.width,y:b.height},q.add(a));J.setAttribute("width",c.x);J.setAttribute("height",c.y);g={x:c.x/2,y:c.y/2};e();a.dispatch({type:"resize"});return a};a.tileSize=function(c){if(!arguments.length)return m;m=c;a.dispatch({type:"move"});return a};a.center=function(c){if(!arguments.length)return r;r=c;e();a.dispatch({type:"move"});return a};a.panBy=function(c){var d=
45/Math.pow(2,l+k-3),f=c.x*d,c=c.y*d;return a.center({lon:r.lon+(H*c-u*f)/m.x,lat:G(E(r.lat)+(H*f+u*c)/m.y)})};a.centerRange=function(c){if(!arguments.length)return B;(B=c)?(L=B[0].lat>-90?E(B[0].lat):-Infinity,y=B[0].lat<90?E(B[1].lat):Infinity):(L=-Infinity,y=Infinity);e();a.dispatch({type:"move"});return a};a.zoom=function(c){if(!arguments.length)return l+k;l=c;d();return a.center(r)};a.zoomBy=function(c,f,g){if(arguments.length<2)return a.zoom(l+k+c);arguments.length<3&&(g=a.pointLocation(f));
l=l+k+c;d();var e=a.locationPoint(g);return a.panBy({x:f.x-e.x,y:f.y-e.y})};a.zoomRange=function(c){if(!arguments.length)return n;n=c;return a.zoom(l+k)};a.extent=function(f){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var g=a.locationPoint(f[0]),e=a.locationPoint(f[1]),h=Math.max((e.x-g.x)/c.x,(g.y-e.y)/c.y),g=a.pointLocation({x:(g.x+e.x)/2,y:(g.y+e.y)/2});l=l+k-Math.log(h)/Math.LN2;d();return a.center(g)};a.angle=function(c){if(!arguments.length)return w;
w=c;x=Math.cos(w);s=Math.sin(w);u=Math.cos(-w);H=Math.sin(-w);e();a.dispatch({type:"move"});return a};a.add=function(c){c.map(a);return a};a.remove=function(c){c.map(null);return a};a.dispatch=j.dispatch(a);return a};q.maps=[];q.add=function(d){for(var e=0;e<q.maps.length;e++)if(q.maps[e]==d)return;q.maps.push(d)};q.remove=function(d){for(var e=0;e<q.maps.length;e++)if(q.maps[e]==d){q.maps.splice(e,1);break}};window.addEventListener&&(window.addEventListener("resize",q,!1),window.addEventListener("load",
q,!1));j.map.locationCoordinate=function(d){var e=1/360;return{column:(d.lon+180)*e,row:(180-E(d.lat))*e,zoom:0}};j.map.coordinateLocation=function(d){var e=45/Math.pow(2,d.zoom-3);return{lon:e*d.column-180,lat:G(180-e*d.row)}};var Q=/WebKit/.test(navigator.userAgent)?-1:0;j.layer=function(d,e){function a(a){for(var c=s[0].nextSibling;x<a;x++){n.insertBefore(s[-4],c);n.insertBefore(s[2],c);n.insertBefore(s[1],c);for(var d=s[-4],f=-4;f<2;)s[f]=s[++f];s[f]=d}}function h(a){for(var c=s[0].nextSibling;x>
a;x--){n.insertBefore(s[-1],c);n.insertBefore(s[2],s[-4]);for(var d=s[2],f=2;f>-4;)s[f]=s[--f];s[f]=d}}function f(){function d(a){var c=a.zoom,f=c<0?1:1<<c,e=a.column%f,g=a.row;e<0&&(e+=f);return{locationPoint:function(a){var a=j.map.locationCoordinate(a),d=Math.pow(2,c-a.zoom);return{x:F.x*(d*a.column-e),y:F.y*(d*a.row-g)}}}}function f(a,c,e){for(var h=A.zoom,i=2-q,j=4+q;a<c;a++){var k=g.load({column:a,row:e,zoom:h},d);if(!k.ready&&!(k.key in C)){k.proxyRefs={};for(var m,y,l,t=1;t<=i;t++){y=!0;for(var n=
0,o=1<<t;n<=o;n++)for(var B=0;B<=o;B++)(l=g.peek(m={column:(a<<t)+B,row:(e<<t)+n,zoom:h+t}))&&l.ready?(C[l.key]=g.load(m),l.proxyCount++,k.proxyRefs[l.key]=l):y=!1;if(y)break}if(!y)for(t=1;t<=j;t++)if((l=g.peek(m={column:a>>t,row:e>>t,zoom:h-t}))&&l.ready){C[l.key]=g.load(m);l.proxyCount++;k.proxyRefs[l.key]=l;break}}C[k.key]=k}}var e=c.map(),i=e.zoom(),k=i-(i=Math.round(i)),t=e.size(),I=e.angle(),F=e.tileSize(),D=e.locationCoordinate(e.center());if(x!=i){x<i?a(i):x>i?h(i):x=i;for(var o=-4;o<=2;o++){var u=
s[o];u.setAttribute("class","zoom"+(o<0?"":"+")+o+" zoom"+(i+o));u.setAttribute("transform","scale("+Math.pow(2,-o)+")")}}n.setAttribute("transform","translate("+t.x/2+","+t.y/2+")"+(I?"rotate("+I/Math.PI*180+")":"")+(k?"scale("+Math.pow(2,k)+")":"")+(w?w.zoomFraction(k):""));var A=e.pointCoordinate(D,O),o=e.pointCoordinate(D,{x:t.x,y:0}),i=e.pointCoordinate(D,t),e=e.pointCoordinate(D,{x:0,y:t.y});if(!k&&!I&&!w)D.column=(Math.round(F.x*D.column)+(t.x&1)/2)/F.x,D.row=(Math.round(F.y*D.row)+(t.y&1)/
2)/F.y;w&&(A=w.unapply(A),o=w.unapply(o),i=w.unapply(i),e=w.unapply(e),D=w.unapply(D));var q=l?l(A.zoom)-A.zoom:0;if(q)t=Math.pow(2,q),A.column*=t,A.row*=t,o.column*=t,o.row*=t,i.column*=t,i.row*=t,e.column*=t,e.row*=t,A.zoom=o.zoom=i.zoom=e.zoom+=q;var k=g.locks(),C={},v;for(v in k)k[v].proxyCount=0;r&&q>-5&&q<3&&(I=A.zoom<0?1:1<<A.zoom,m?(S(A,o,i,0,I,f),S(i,e,A,0,I,f)):(t=Math.floor((A.column+i.column)/2),I=Math.max(0,Math.min(I-1,Math.floor((o.row+e.row)/2))),o=Math.min(4,A.zoom),t=t>>o<<o,f(t,
t+1,I>>o<<o)));for(v in C)o=C[v],t=Math.pow(2,o.level=o.zoom-D.zoom),o.element.setAttribute("transform","translate("+(o.x=F.x*(o.column-D.column*t))+","+(o.y=F.y*(o.row-D.row*t))+")");for(v in k)v in C||(o=g.unload(v),o.element.parentNode.removeChild(o.element),delete o.proxyRefs);for(v in C)o=C[v],o.element.parentNode!=s[o.level]&&(s[o.level].appendChild(o.element),c.show&&c.show(o));g.flush();c.dispatch({type:"move"})}var c={},g=c.cache=j.cache(d,e).size(512),m=!0,r=!0,l,k,i,n=j.svg("g"),w,x,s=
{};n.setAttribute("class","layer");for(var u=-4;u<=-1;u++)s[u]=n.appendChild(j.svg("g"));for(u=2;u>=1;u--)s[u]=n.appendChild(j.svg("g"));s[0]=n.appendChild(j.svg("g"));c.map=function(a){if(!arguments.length)return i;if(i){if(i==a)return n.parentNode.appendChild(n),c;i.off("move",f).off("resize",f);n.parentNode.removeChild(n)}if(i=a)i.container().appendChild(n),c.init&&c.init(n),i.on("move",f).on("resize",f),f();return c};c.container=function(){return n};c.levels=function(){return s};c.id=function(a){if(!arguments.length)return k;
k=a;n.setAttribute("id",a);return c};c.visible=function(a){if(!arguments.length)return r;(r=a)?n.removeAttribute("visibility"):n.setAttribute("visibility","hidden");i&&f();return c};c.transform=function(a){if(!arguments.length)return w;w=a;i&&f();return c};c.zoom=function(a){if(!arguments.length)return l;l=typeof a=="function"||a==null?a:function(){return a};i&&f();return c};c.tile=function(a){if(!arguments.length)return m;m=a;i&&f();return c};c.reload=function(){g.clear();i&&f();return c};c.dispatch=
j.dispatch(c);c.on("load",function(a){if(a.tile.proxyRefs){for(var c in a.tile.proxyRefs){var d=a.tile.proxyRefs[c];--d.proxyCount<=0&&g.unload(c)&&d.element.parentNode.removeChild(d.element)}delete a.tile.proxyRefs}});return c};j.image=function(){var d=j.layer(function(a){var h=a.element=j.svg("image"),f=d.map().tileSize();h.setAttribute("preserveAspectRatio","none");h.setAttribute("width",f.x);h.setAttribute("height",f.y);typeof e=="function"?(h.setAttribute("opacity",0),f=e(a),f!=null?a.request=
j.queue.image(h,f,function(c){delete a.request;a.ready=!0;a.img=c;h.removeAttribute("opacity");d.dispatch({type:"load",tile:a})}):(a.ready=!0,d.dispatch({type:"load",tile:a}))):(a.ready=!0,e!=null&&h.setAttributeNS(j.ns.xlink,"href",e),d.dispatch({type:"load",tile:a}))},function(a){a.request&&a.request.abort(!0)}),e;d.url=function(a){if(!arguments.length)return e;e=typeof a=="string"&&/{.}/.test(a)?j.url(a):a;return d.reload()};return d};j.geoJson=function(d){function e(a){var c={lat:0,lon:0};return function(d){c.lat=
d[1];c.lon=d[0];var f=a(c);d.x=f.x;d.y=f.y;return f}}function a(a,c){return a&&a.type in s&&s[a.type](a,c)}function h(a,c,d){return a.type in u&&u[a.type](a,c,d)}function f(){var a=c.map().zoom(),d=c.cache.locks(),f,e,g,i,k,l,j;if(w=="fixed")for(f in d){if((e=d[f]).scale!=a){j="scale("+Math.pow(2,e.zoom-a)+")";i=-1;for(k=(g=e.features).length;++i<k;)h((l=g[i]).data.geometry,l.element,j);e.scale=a}}else for(f in d){i=-1;for(k=(g=(e=d[f]).features).length;++i<k;)h((l=g[i]).data.geometry,l.element,"");
delete e.scale}}var c=j.layer(function(f,g){function h(e){var k=[];if(e.next)f.request=d(e.next.href,h);switch(e.type){case "FeatureCollection":for(var l=0;l<e.features.length;l++){var j=e.features[l],m=a(j.geometry,g);m&&k.push({element:i.appendChild(m),data:j})}break;case "Feature":(m=a(e.geometry,g))&&k.push({element:i.appendChild(m),data:e});break;default:(m=a(e,g))&&k.push({element:i.appendChild(m),data:{type:"Feature",geometry:e}})}f.ready=!0;k.push.apply(f.features,k);c.dispatch({type:"load",
tile:f,features:k})}var i=f.element=j.svg("g");f.features=[];g=e(g(f).locationPoint);m!=null?f.request=d(typeof m=="function"?m(f):m,h):h({type:"FeatureCollection",features:x||[]})},function(a){a.request&&a.request.abort(!0)}),g=c.container(),m,r=!0,l="org.polymaps."+j.id(),k="url(#"+l+")",i=g.insertBefore(j.svg("clipPath"),g.firstChild),n=i.appendChild(j.svg("rect")),w="auto",x;g.setAttribute("fill-rule","evenodd");i.setAttribute("id",l);if(!arguments.length)d=j.queue.json;var s={Point:function(a,
c){var d=c(a.coordinates),f=j.svg("circle");f.setAttribute("r",4.5);f.setAttribute("transform","translate("+d.x+","+d.y+")");return f},MultiPoint:function(a,c){for(var d=j.svg("g"),f=a.coordinates,e,g,h=-1,i=f.length;++h<i;)g=d.appendChild(j.svg("circle")),g.setAttribute("r",4.5),g.setAttribute("transform","translate("+(e=c(f[h])).x+","+e.y+")");return d},LineString:function(a,c){for(var d=j.svg("path"),f=["M"],e=a.coordinates,g,h=-1,i=e.length;++h<i;)f.push((g=c(e[h])).x,",",g.y,"L");f.pop();if(f.length)return d.setAttribute("d",
f.join("")),d},MultiLineString:function(a,c){for(var d=j.svg("path"),f=[],e=a.coordinates,g,h=-1,i,k=e.length,l;++h<k;){g=e[h];i=-1;l=g.length;for(f.push("M");++i<l;)f.push((p=c(g[i])).x,",",p.y,"L");f.pop()}if(f.length)return d.setAttribute("d",f.join("")),d},Polygon:function(a,c){for(var d=j.svg("path"),f=[],e=a.coordinates,g,h=-1,i,k=e.length,l;++h<k;){g=e[h];i=-1;l=g.length-1;for(f.push("M");++i<l;)f.push((p=c(g[i])).x,",",p.y,"L");f[f.length-1]="Z"}if(f.length)return d.setAttribute("d",f.join("")),
d},MultiPolygon:function(a,c){for(var d=j.svg("path"),f=[],e=a.coordinates,g,h,i=-1,k,l,m=e.length,n,w;++i<m;){g=e[i];k=-1;for(n=g.length;++k<n;){h=g[k];l=-1;w=h.length-1;for(f.push("M");++l<w;)f.push((p=c(h[l])).x,",",p.y,"L");f[f.length-1]="Z"}}if(f.length)return d.setAttribute("d",f.join("")),d},GeometryCollection:function(c,f){for(var d=j.svg("g"),e=-1,g=c.geometries,h=g.length,i;++e<h;)(i=a(g[e],f))&&d.appendChild(i);return d}},u={Point:function(a,c,d){a=a.coordinates;c.setAttribute("transform",
"translate("+a.x+","+a.y+")"+d)},MultiPoint:function(a,c,d){for(var a=a.coordinates,f=-1,e=g.length,c=c.firstChild,g;++f<e;)g=a[f],c.setAttribute("transform","translate("+g.x+","+g.y+")"+d),c=c.nextSibling}};c.url=function(a){if(!arguments.length)return m;m=typeof a=="string"&&/{.}/.test(a)?j.url(a):a;m!=null&&(x=null);typeof m=="string"&&c.tile(!1);return c.reload()};c.features=function(a){if(!arguments.length)return x;if(x=a)m=null,c.tile(!1);return c.reload()};c.clip=function(a){if(!arguments.length)return r;
r&&g.removeChild(i);(r=a)&&g.insertBefore(i,g.firstChild);var d=c.cache.locks(),f;for(f in d)r?d[f].element.setAttribute("clip-path",k):d[f].element.removeAttribute("clip-path");return c};var H=c.tile;c.tile=function(a){arguments.length&&!a&&c.clip(a);return H.apply(c,arguments)};var q=c.map;c.map=function(a){if(a&&n){var d=a.tileSize();n.setAttribute("width",d.x);n.setAttribute("height",d.y)}return q.apply(c,arguments)};c.scale=function(a){if(!arguments.length)return w;if(w=a)c.on("move",f);else c.off("move",
f);c.map()&&f();return c};c.show=function(a){r?a.element.setAttribute("clip-path",k):a.element.removeAttribute("clip-path");c.dispatch({type:"show",tile:a,features:a.features});return c};c.reshow=function(){var a=c.cache.locks(),d;for(d in a)c.show(a[d]);return c};return c};j.dblclick=function(){function d(c){var d=h.zoom(),d=c.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);a==="mouse"?h.zoomBy(d,h.mouse(c)):h.zoomBy(d)}var e={},a="mouse",h,f;e.zoom=function(c){if(!arguments.length)return a;a=c;return e};
e.map=function(a){if(!arguments.length)return h;h&&(f.removeEventListener("dblclick",d,!1),f=null);if(h=a)f=h.container(),f.addEventListener("dblclick",d,!1);return e};return e};j.drag=function(){function d(a){a.shiftKey||(c={x:a.clientX,y:a.clientY},h.focusableParent().focus(),a.preventDefault(),document.body.style.setProperty("cursor","move",null))}function e(a){if(c)h.panBy({x:a.clientX-c.x,y:a.clientY-c.y}),c.x=a.clientX,c.y=a.clientY}var a={},h,f,c;a.map=function(c){if(!arguments.length)return h;
h&&(f.removeEventListener("mousedown",d,!1),f=null);if(h=c)f=h.container(),f.addEventListener("mousedown",d,!1);return a};window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",function(a){c&&(e(a),c=null,document.body.style.removeProperty("cursor"))},!1);return a};j.wheel=function(){function d(){g=null}function e(a){var e=a.wheelDelta||-a.detail,l;if(e)if(f){try{k.scrollTop=1E3,k.dispatchEvent(a),e=1E3-k.scrollTop}catch(j){}e*=0.0050}else l=Date.now(),l-h>200?(e=e>0?1:-1,h=l):
e=0;if(e)switch(c){case "mouse":l=m.mouse(a);g||(g=m.pointLocation(l));m.off("move",d).zoomBy(e,l,g).on("move",d);break;case "location":m.zoomBy(e,m.locationPoint(g),g);break;default:m.zoomBy(e)}a.preventDefault();return!1}var a={},h=0,f=!0,c="mouse",g,m,j,l=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";l.style.height="2000px";k.appendChild(l);document.body.appendChild(k);
a.smooth=function(c){if(!arguments.length)return f;f=c;return a};a.zoom=function(f,e){if(!arguments.length)return c;c=f;g=e;if(m)if(c=="mouse")m.on("move",d);else m.off("move",d);return a};a.map=function(f){if(!arguments.length)return m;m&&(j.removeEventListener("mousemove",d,!1),j.removeEventListener("mousewheel",e,!1),j.removeEventListener("MozMousePixelScroll",e,!1),j=null,m.off("move",d));if(m=f){if(c=="mouse")m.on("move",d);j=m.container();j.addEventListener("mousemove",d,!1);j.addEventListener("mousewheel",
e,!1);j.addEventListener("MozMousePixelScroll",e,!1)}return a};return a};j.arrow=function(){function d(a){if(!a.ctrlKey&&!a.altKey&&!a.metaKey){var d=Date.now(),f=0,e=0;switch(a.keyCode){case 37:if(!c.left)g=d,c.left=1,c.right||(f=k);break;case 39:if(!c.right)g=d,c.right=1,c.left||(f=-k);break;case 38:if(!c.up)g=d,c.up=1,c.down||(e=k);break;case 40:if(!c.down)g=d,c.down=1,c.up||(e=-k);break;default:return}(f||e)&&i.panBy({x:f,y:e});!j&&c.left|c.right|c.up|c.down&&(j=setInterval(h,l));a.preventDefault()}}
function e(a){g=Date.now();switch(a.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}j&&!(c.left|c.right|c.up|c.down)&&(j=clearInterval(j));a.preventDefault()}function a(a){switch(a.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}a.preventDefault()}function h(){if(i&&!(Date.now()<g+r)){var a=(c.left-c.right)*k,d=(c.up-c.down)*k;(a||d)&&i.panBy({x:a,y:d})}}
var f={},c={left:0,right:0,up:0,down:0},g=0,j,r=250,l=50,k=16,i,n;f.map=function(c){if(!arguments.length)return i;i&&(n.removeEventListener("keypress",a,!1),n.removeEventListener("keydown",d,!1),n.removeEventListener("keyup",e,!1),n=null);if(i=c)n=i.focusableParent(),n.addEventListener("keypress",a,!1),n.addEventListener("keydown",d,!1),n.addEventListener("keyup",e,!1);return f};f.speed=function(a){if(!arguments.length)return k;k=a;return f};return f};j.hash=function(){function d(){var a=g(f);h!==
a&&location.replace(h=a)}function e(){if(location.hash!==h)c(f,(h=location.hash).substring(1))&&d()}var a={},h,f,c=function(a,c){var d=c.split("/").map(Number);if(d.length<3||d.some(isNaN))return!0;else{var f=a.size();a.zoomBy(d[0]-a.zoom(),{x:f.x/2,y:f.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,d[1])),lon:d[2]})}},g=function(a){var c=a.center(),a=a.zoom(),d=Math.max(0,Math.ceil(Math.log(a)/Math.LN2));return"#"+a.toFixed(2)+"/"+c.lat.toFixed(d)+"/"+c.lon.toFixed(d)};a.map=function(c){if(!arguments.length)return f;
f&&(f.off("move",d),window.removeEventListener("hashchange",e,!1));if(f=c)f.on("move",d),window.addEventListener("hashchange",e,!1),location.hash?e():d();return a};a.parser=function(d){if(!arguments.length)return c;c=d;return a};a.formatter=function(c){if(!arguments.length)return g;g=c;return a};return a};j.touch=function(){function d(d){var f=-1,e=d.touches.length,h=Date.now();if(e==1&&h-c<300){var j=a.zoom();a.zoomBy(1-j+Math.floor(j),a.mouse(d.touches[0]));d.preventDefault()}c=h;g=a.zoom();for(m=
a.angle();++f<e;)h=d.touches[f],r[h.identifier]=a.pointLocation(a.mouse(h))}var e={},a,h,f=!1,c=0,g,m,r={};window.addEventListener("touchmove",function(c){switch(c.touches.length){case 1:var d=c.touches[0];a.zoomBy(0,a.mouse(d),r[d.identifier]);c.preventDefault();break;case 2:var d=c.touches[0],e=c.touches[1],h=a.mouse(d),w=a.mouse(e),h={x:(h.x+w.x)/2,y:(h.y+w.y)/2},d=j.map.locationCoordinate(r[d.identifier]),e=j.map.locationCoordinate(r[e.identifier]),e=j.map.coordinateLocation({row:(d.row+e.row)/
2,column:(d.column+e.column)/2,zoom:0});a.zoomBy(Math.log(c.scale)/Math.LN2+g-a.zoom(),h,e);f&&a.angle(c.rotation/180*Math.PI+m);c.preventDefault()}},!1);e.rotate=function(a){if(!arguments.length)return f;f=a;return e};e.map=function(c){if(!arguments.length)return a;a&&(h.removeEventListener("touchstart",d,!1),h=null);if(a=c)h=a.container(),h.addEventListener("touchstart",d,!1);return e};return e};j.interact=function(){var d={},e=j.drag(),a=j.wheel(),h=j.dblclick(),f=j.touch(),c=j.arrow();d.map=function(g){e.map(g);
a.map(g);h.map(g);f.map(g);c.map(g);return d};return d};j.compass=function(){function d(a){q.setAttribute("class","compass active");A||(A=setInterval(e,I));E&&z.panBy(E);J=Date.now();return k(a)}function e(){E&&Date.now()>J+t&&z.panBy(E)}function a(a){if(a.shiftKey)return v={x0:z.mouse(a)},z.focusableParent().focus(),k(a)}function h(a){if(v)v.x1=z.mouse(a),K.setAttribute("x",Math.min(v.x0.x,v.x1.x)),K.setAttribute("y",Math.min(v.x0.y,v.x1.y)),K.setAttribute("width",Math.abs(v.x0.x-v.x1.x)),K.setAttribute("height",
Math.abs(v.x0.y-v.x1.y)),K.removeAttribute("display")}function f(){q.setAttribute("class","compass");v&&(v.x1&&(z.extent([z.pointLocation({x:Math.min(v.x0.x,v.x1.x),y:Math.max(v.x0.y,v.x1.y)}),z.pointLocation({x:Math.max(v.x0.x,v.x1.x),y:Math.min(v.x0.y,v.x1.y)})]),K.setAttribute("display","none")),v=null);A&&(clearInterval(A),A=0)}function c(a){return function(){a?this.setAttribute("class","active"):this.removeAttribute("class");E=a}}function g(a){return function(c){q.setAttribute("class","compass active");
var d=z.zoom();z.zoom(a<0?Math.ceil(d)-1:Math.floor(d)+1);return k(c)}}function m(a){return function(c){z.zoom(a);return k(c)}}function r(){this.setAttribute("class","active")}function l(){this.removeAttribute("class")}function k(a){a.stopPropagation();a.preventDefault();return!1}function i(a){var f=Math.SQRT1_2*y,e=y*0.7,g=y*0.2,h=j.svg("g"),i=h.appendChild(j.svg("path")),l=h.appendChild(j.svg("path"));i.setAttribute("class","direction");i.setAttribute("pointer-events","all");i.setAttribute("d",
"M0,0L"+f+","+f+"A"+y+","+y+" 0 0,1 "+-f+","+f+"Z");l.setAttribute("class","chevron");l.setAttribute("d","M"+g+","+(e-g)+"L0,"+e+" "+-g+","+(e-g));l.setAttribute("pointer-events","none");h.addEventListener("mousedown",d,!1);h.addEventListener("mouseover",c(a),!1);h.addEventListener("mouseout",c(null),!1);h.addEventListener("dblclick",k,!1);return h}function n(a){var c=y*0.4,d=c/2,f=j.svg("g"),e=f.appendChild(j.svg("path")),h=f.appendChild(j.svg("path")),i=f.appendChild(j.svg("path")),m=f.appendChild(j.svg("path"));
e.setAttribute("class","back");e.setAttribute("d","M"+-c+",0V"+-c+"A"+c+","+c+" 0 1,1 "+c+","+-c+"V0Z");h.setAttribute("class","direction");h.setAttribute("d",e.getAttribute("d"));i.setAttribute("class","chevron");i.setAttribute("d","M"+-d+","+-c+"H"+d+(a>0?"M0,"+(-c-d)+"V"+-d:""));m.setAttribute("class","fore");m.setAttribute("fill","none");m.setAttribute("d",e.getAttribute("d"));f.addEventListener("mousedown",g(a),!1);f.addEventListener("mouseover",r,!1);f.addEventListener("mouseout",l,!1);f.addEventListener("dblclick",
k,!1);return f}function w(a){var c=y*0.2,d=y*0.4,f=j.svg("g"),e=f.appendChild(j.svg("rect")),g=f.appendChild(j.svg("path"));e.setAttribute("pointer-events","all");e.setAttribute("fill","none");e.setAttribute("x",-d);e.setAttribute("y",-0.75*d);e.setAttribute("width",2*d);e.setAttribute("height",1.5*d);g.setAttribute("class","chevron");g.setAttribute("d","M"+-c+",0H"+c);f.addEventListener("mousedown",m(a),!1);f.addEventListener("dblclick",k,!1);return f}function x(){var a=y+6,c=a,d=z.size();switch(F){case "top-right":a=
d.x-a;break;case "bottom-left":c=d.y-c;break;case "bottom-right":a=d.x-a,c=d.y-c}q.setAttribute("transform","translate("+a+","+c+")");K.setAttribute("transform","translate("+-a+","+-c+")");for(var f in L)f==z.zoom()?L[f].setAttribute("class","active"):L[f].removeAttribute("class")}function s(){for(;q.lastChild;)q.removeChild(q.lastChild);q.appendChild(K);if(G!="none"){C=q.appendChild(j.svg("g"));C.setAttribute("class","pan");var a=C.appendChild(j.svg("circle"));a.setAttribute("class","back");a.setAttribute("r",
y);C.appendChild(i({x:0,y:-B})).setAttribute("transform","rotate(0)");C.appendChild(i({x:B,y:0})).setAttribute("transform","rotate(90)");C.appendChild(i({x:0,y:B})).setAttribute("transform","rotate(180)");C.appendChild(i({x:-B,y:0})).setAttribute("transform","rotate(270)");a=C.appendChild(j.svg("circle"));a.setAttribute("fill","none");a.setAttribute("class","fore");a.setAttribute("r",y)}else C=null;if(D!="none"){o=q.appendChild(j.svg("g"));o.setAttribute("class","zoom");a=-0.5;if(D=="big"){L={};for(var c=
z.zoomRange()[0],a=0;c<=z.zoomRange()[1];c++,a++)(L[c]=o.appendChild(w(c))).setAttribute("transform","translate(0,"+-(a+0.75)*y*0.4+")")}c=G=="none"?0.4:2;o.setAttribute("transform","translate(0,"+y*(/^top-/.test(F)?c+(a+0.5)*0.4:-c)+")");o.appendChild(n(1)).setAttribute("transform","translate(0,"+-(a+0.5)*y*0.4+")");o.appendChild(n(-1)).setAttribute("transform","scale(-1)")}else o=null;x()}var u={},q=j.svg("g"),L={},y=30,B=16,J=0,t=250,I=50,F="top-left",D="small",o,G="small",A,E,C,v,K=j.svg("rect"),
z,M,N;q.setAttribute("class","compass");K.setAttribute("class","back fore");K.setAttribute("pointer-events","none");K.setAttribute("display","none");u.radius=function(a){if(!arguments.length)return y;y=a;z&&s();return u};u.speed=function(a){if(!arguments.length)return y;B=a;return u};u.position=function(a){if(!arguments.length)return F;F=a;z&&s();return u};u.pan=function(a){if(!arguments.length)return G;G=a;z&&s();return u};u.zoom=function(a){if(!arguments.length)return D;D=a;z&&s();return u};u.map=
function(c){if(!arguments.length)return z;z&&(M.removeEventListener("mousedown",a,!1),M.removeChild(q),M=null,N.removeEventListener("mousemove",h,!1),N.removeEventListener("mouseup",f,!1),N=null,z.off("move",x).off("resize",x));if(z=c)M=z.container(),M.appendChild(q),M.addEventListener("mousedown",a,!1),N=M.ownerDocument.defaultView,N.addEventListener("mousemove",h,!1),N.addEventListener("mouseup",f,!1),z.on("move",x).on("resize",x),s();return u};return u};j.grid=function(){function d(){var d=h.firstChild,
c=a.size(),e=a.pointLocation(O);a.pointLocation(c);var m=Math.pow(2,4-Math.round(a.zoom()));e.lat=Math.floor(e.lat/m)*m;e.lon=Math.ceil(e.lon/m)*m;for(var r;(r=a.locationPoint(e).x)<=c.x;e.lon+=m)d||(d=h.appendChild(j.svg("line"))),d.setAttribute("x1",r),d.setAttribute("x2",r),d.setAttribute("y1",0),d.setAttribute("y2",c.y),d=d.nextSibling;for(;(r=a.locationPoint(e).y)<=c.y;e.lat-=m)d||(d=h.appendChild(j.svg("line"))),d.setAttribute("y1",r),d.setAttribute("y2",r),d.setAttribute("x1",0),d.setAttribute("x2",
c.x),d=d.nextSibling;for(;d;)c=d.nextSibling,h.removeChild(d),d=c}var e={},a,h=j.svg("g");h.setAttribute("class","grid");e.map=function(f){if(!arguments.length)return a;a&&(h.parentNode.removeChild(h),a.off("move",d).off("resize",d));if(a=f)a.on("move",d).on("resize",d),a.container().appendChild(h),a.dispatch({type:"move"});return e};return e};j.stylist=function(){function d(d){var c=d.features.length,g=e.length,m=a.length,r,l,k,i,n,q;for(n=0;n<c;++n)if(l=(r=d.features[n]).element){r=r.data;for(q=
0;q<g;++q)i=(k=e[q]).value,typeof i==="function"&&(i=i.call(null,r)),i==null?k.name.local?l.removeAttributeNS(k.name.space,k.name.local):l.removeAttribute(k.name):k.name.local?l.setAttributeNS(k.name.space,k.name.local,i):l.setAttribute(k.name,i);for(q=0;q<m;++q)i=(k=a[q]).value,typeof i==="function"&&(i=i.call(null,r)),i==null?l.style.removeProperty(k.name):l.style.setProperty(k.name,i,k.priority);if(i=h){for(typeof i==="function"&&(i=i.call(null,r));l.lastChild;)l.removeChild(l.lastChild);i!=null&&
l.appendChild(j.svg("title")).appendChild(document.createTextNode(i))}}}var e=[],a=[],h;d.attr=function(a,c){e.push({name:T(a),value:c});return d};d.style=function(e,c,g){a.push({name:e,value:c,priority:arguments.length<3?null:g});return d};d.title=function(a){h=a;return d};return d}})(org.polymaps);
